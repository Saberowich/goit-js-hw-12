{"version":3,"file":"commonHelpers.js","sources":["../src/gallery-service.js","../src/main.js"],"sourcesContent":["const API_KEY = '42473216-758414b66288a27fb7f33990e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport default class GalerryApiService {\n    constructor() {\n        this.userQuery = '';\n        this.page = 1;\n\n    }\n\n    async fetchArticles() {\n        \n       const response = await axios.get(`${BASE_URL}?key=${API_KEY}&q=${this.userQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${this.page}&per_page=15`);\n\n        this.incrementPage();\n\n        return response.data;\n\n    }\n\n    incrementPage() {\n        this.page += 1;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n\n    get query() {\n        return this.userQuery;\n    }\n\n    set query(newQuery) {\n        this.userQuery = newQuery;\n    }\n}","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport GalerryApiService from \"./gallery-service\";\n\nconst inputElem = document.querySelector('.search-input');\nconst formElem = document.querySelector('.search-form');\nconst imagesContainer = document.querySelector('.gallery');\nconst divElem = document.querySelector('div');\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\n\n\nconst galerryApiService = new GalerryApiService();\n\n\nconst showLoader = () => {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  loadMoreBtn.append(loader);\n}\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\nformElem.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\n\nfunction onSearch(e) {\n  showLoader();\n  imagesContainer.innerHTML = \"\";\n  e.preventDefault();\n  clearGallery();\n  galerryApiService.userQuery = e.currentTarget.elements.\n      searchQuery.value;\n  if (galerryApiService.userQuery.trim() === '') {\n    iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topLeft',\n                transitionIn: \"fadeInLeft\",\n            });\n            hideLoader()\n  };\n  showLoadMoreBtn();\n  galerryApiService.resetPage();\n  \n  galerryApiService.fetchArticles().then(function (response) {\n    appendGallery(response);\n    \n    if (response.hits.length === 0) {\n      iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topLeft',\n          transitionIn: \"fadeInLeft\",\n      });\n      loadMoreBtn.classList.add('is-hidden');\n    }\n  })\n    .catch(function (error) {\n      console.log(error);\n    });\n    \n}\n\nfunction onLoadMore() {\ngalerryApiService.fetchArticles().then(function (response) {\n  appendGallery(response);\n  boundingClientRect();\n  if (imagesContainer.children.length >= response.totalHits) {\n    iziToast.error({\n                message: 'We are sorry, but you have reached the end of search results.',\n                position: 'topCenter',\n                transitionIn: \"fadeInLeft\",\n    });\n    loadMoreBtn.classList.add('is-hidden');\n    \n  }\n  });\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction boundingClientRect() {\n    const { height: cardHeight } = document.querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n}\n\nfunction generateMarkupGalerry(response) {\n  return response.hits.map((response) => {\n  return `\n            <li class=\"gallery-item\"><a href=\"${response.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${response.webformatURL}\" alt=\"${response.tags}\"></a>\n          <p>Likes: ${response.likes}</p>\n          <p>Views: ${response.views}</p>\n          <p>Comments: ${response.comments}</p>\n          <p>Downloads: ${response.downloads}</p>\n          </li>`;\n  }).join('');\n \n}\n\nfunction appendGallery(response) {\n  imagesContainer.insertAdjacentHTML('beforeend', generateMarkupGalerry(response));\n\n  const lightbox = new SimpleLightbox('.gallery a', options);\n      lightbox.on('show.simplelightbox');\n      lightbox.refresh();\n  formElem.reset();\n  hideLoader();\n      \n}\n\nfunction clearGallery() {\n  imagesContainer.innerHTML = '';\n}\n \n\nconst options = {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionSelector: \"img\",\n  captionDelay: 250,\n};"],"names":["API_KEY","BASE_URL","GalerryApiService","response","newQuery","formElem","imagesContainer","loadMoreBtn","galerryApiService","showLoader","loader","hideLoader","onSearch","onLoadMore","e","clearGallery","iziToast","showLoadMoreBtn","appendGallery","error","boundingClientRect","cardHeight","generateMarkupGalerry","lightbox","SimpleLightbox","options"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAGF,MAAMC,CAAkB,CACnC,aAAc,CACV,KAAK,UAAY,GACjB,KAAK,KAAO,CAEf,CAED,MAAM,eAAgB,CAEnB,MAAMC,EAAW,MAAM,MAAM,IAAI,GAAGF,CAAQ,QAAQD,CAAO,MAAM,KAAK,SAAS,iEAAiE,KAAK,IAAI,cAAc,EAEtK,YAAK,cAAa,EAEXG,EAAS,IAEnB,CAED,eAAgB,CACZ,KAAK,MAAQ,CAChB,CAED,WAAY,CACR,KAAK,KAAO,CACf,CAED,IAAI,OAAQ,CACR,OAAO,KAAK,SACf,CAED,IAAI,MAAMC,EAAU,CAChB,KAAK,UAAYA,CACpB,CACL,CC5BkB,SAAS,cAAc,eAAe,EACxD,MAAMC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAkB,SAAS,cAAc,UAAU,EACzC,SAAS,cAAc,KAAK,EAC5C,MAAMC,EAAc,SAAS,cAAc,2BAA2B,EAGhEC,EAAoB,IAAIN,EAGxBO,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BH,EAAY,OAAOG,CAAM,CAC3B,EAEMC,EAAa,IAAM,CACvB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,EAEAL,EAAS,iBAAiB,SAAUO,CAAQ,EAC5CL,EAAY,iBAAiB,QAASM,CAAU,EAGhD,SAASD,EAASE,EAAG,CACnBL,IACAH,EAAgB,UAAY,GAC5BQ,EAAE,eAAc,EAChBC,IACAP,EAAkB,UAAYM,EAAE,cAAc,SAC1C,YAAY,MACZN,EAAkB,UAAU,KAAI,IAAO,KACzCQ,EAAS,MAAM,CACH,QAAS,2EACT,SAAU,UACV,aAAc,YAC9B,CAAa,EACDL,EAAY,GAEtBM,EAAe,EACfT,EAAkB,UAAS,EAE3BA,EAAkB,cAAa,EAAG,KAAK,SAAUL,EAAU,CACzDe,EAAcf,CAAQ,EAElBA,EAAS,KAAK,SAAW,IAC3Ba,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UACV,aAAc,YACxB,CAAO,EACDT,EAAY,UAAU,IAAI,WAAW,EAE3C,CAAG,EACE,MAAM,SAAUY,EAAO,CACtB,QAAQ,IAAIA,CAAK,CACvB,CAAK,CAEL,CAEA,SAASN,GAAa,CACtBL,EAAkB,cAAe,EAAC,KAAK,SAAUL,EAAU,CACzDe,EAAcf,CAAQ,EACtBiB,IACId,EAAgB,SAAS,QAAUH,EAAS,YAC9Ca,EAAS,MAAM,CACH,QAAS,gEACT,SAAU,YACV,aAAc,YAC9B,CAAK,EACDT,EAAY,UAAU,IAAI,WAAW,EAGzC,CAAG,CACH,CAEA,SAASU,GAAkB,CACzBV,EAAY,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASa,GAAqB,CAC1B,KAAM,CAAE,OAAQC,CAAU,EAAK,SAAS,cAAc,UAAU,EAC7D,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACL,CAEA,SAASC,EAAsBnB,EAAU,CACvC,OAAOA,EAAS,KAAK,IAAKA,GACnB;AAAA,gDACuCA,EAAS,aAAa;AAAA,4CAC1BA,EAAS,YAAY,UAAUA,EAAS,IAAI;AAAA,sBAClEA,EAAS,KAAK;AAAA,sBACdA,EAAS,KAAK;AAAA,yBACXA,EAAS,QAAQ;AAAA,0BAChBA,EAAS,SAAS;AAAA,gBAEzC,EAAE,KAAK,EAAE,CAEZ,CAEA,SAASe,EAAcf,EAAU,CAC/BG,EAAgB,mBAAmB,YAAagB,EAAsBnB,CAAQ,CAAC,EAE/E,MAAMoB,EAAW,IAAIC,EAAe,aAAcC,CAAO,EACrDF,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,EACpBlB,EAAS,MAAK,EACdM,GAEF,CAEA,SAASI,GAAe,CACtBT,EAAgB,UAAY,EAC9B,CAGA,MAAMmB,EAAU,CACd,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,gBAAiB,MACjB,aAAc,GAChB"}